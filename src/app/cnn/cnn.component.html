<div class="flex justify-center">
  <div class="container">
    <div class="input-section">
      <input
        type="file"
        id="fileInput"
        (change)="onFileSelected($event)"
        hidden
      />
      <label for="fileInput" class="file-input-label">
        @if (inputImageSubject | async; as inputImage) {
        <img [src]="inputImage" class="preview-image" alt="input" />
        } @else {
        <span>Upload Image</span>
        }
      </label>
      @if(inputImageSubject | async) {
      <button class="remove-icon" (click)="removeImage()">✖</button>
      }
    </div>

    <div class="operator-section">⊗</div>

    <div class="kernel">
      <div class="matrix-section">
        @for ( cell of kernelSubject | async; track trackByFn(i, cell); let i =
        $index) {
        <input
          class="matrix-cell"
          type="number"
          [value]="cell"
          (input)="updateKernel($event, i)"
        />
        }
      </div>

      <p class="label">kernel</p>

      <button class="rotate-kernel" (click)="rotateKernelClockWise()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="white"
          class="bi bi-arrow-clockwise"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"
          />
          <path
            d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"
          />
        </svg>
      </button>
    </div>

    <div class="equal-operator">=</div>

    <div class="output-section">
      @if (outputImage$ | async; as imageSrc) {
      <img [src]="imageSrc" class="preview-image" alt="output" />
      }
    </div>
  </div>
</div>
